
<polymer-element name="time-format" attributes="time,format,caps">
    <template>
        <style>
            *{
                font-family: Roboto;
                font-weight: 300;
            }
        </style>
        <span id='format'></span>
    </template>
    <script>
        Polymer({
            MON3:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
            DAY3:['Mon','Tue','Wed','Thu','Fri','Sat','Sun'],
            ready:function(){
                if(!this.caps) this.caps = false;
            },
            process:function(){
//                console.log('do it',this.time,this.format);
                if(!this.time) return;
                var out = this.format;
//                var s = '2011-06-21T14:27:28.593Z';
                var a = this.time.split(/[^0-9]/);
                //for (i=0;i<a.length;i++) { alert(a[i]); }
                var d = new Date (a[0],a[1]-1,a[2],a[3],a[4],a[5] );
                var t = new Date(Date.parse(this.time));
                console.log('proc',this.time,'----',t,'----',d);
                var rep = { DDD: this.DAY3[(t.getDay()+6)%7],   DD: t.getDate(),
                            MMM: this.MON3[t.getMonth()],       MM: (t.getMonth()+1),
                            YYYY: t.getFullYear()
                          };
//                console.log('rep',rep);
                for(var typ in rep)
                    out = out.replace(typ, rep[typ]);
                if(this.caps) out = out.toUpperCase();
                this.$.format.innerHTML = out;
            },
            ready:function(){
                console.log("TIME FORMAT");
                this.process();
            },
            timeChanged:function(){
                this.process();
            }

//            getWeekDay:function(date){
//                return (date.getDay()+6)%7;
//            },

        });
    </script>
</polymer-element>

