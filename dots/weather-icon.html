

<polymer-element name="weather-icon" attributes="data,size">
    <template>
        <style>
            .dot{
                position: relative;
                border-radius: 1000px;
/*                width: {{size}}px;*/
/*                height: {{size}}px;*/
                overflow:hidden;
                display:inline-block;
            }
            .dot .night{
                position:absolute;
                top:0; right:0;
                bottom: 0; left: 0;
                background: black;
            }
            .dot .sun{
                position:absolute;
                top:0; right:0;
                bottom: 0; left: 0;
                background: #ffb300;
            }
            .dot .clouds{
                position:absolute;
                top:0; left:0; right:0;
/*                background: #e0e0e0;*/
                background: #eee;
                opacity: 0.8;
/*                background: #999;*/
/*                opacity: 0.5;*/
            }
            .dot .temp{
                font-family: Roboto;
                font-weight:500;
                position:absolute;
                top:0; right:0;
                bottom: 0; left: 0;
                font-size: 22px;
                font-weight:400 !important;
                padding-top:8px;
                color: white;
                vertical-align: middle;
                text-align: center;
                text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;
                -webkit-font-smoothing:antialiased;
            }
            .dot .rain{
                position:absolute;
                top:0; right:0;
                bottom: 0; left: 0;
                background: transparent;
                line-height: 70%;
                text-align: left;
                margin-top: 2px;
            }

        .dot .rain .drop{
            display:inline-block;
            margin:0; padding:0;
            margin-right:1px;
            margin-top: 1px;
        }
        .dot .rain .drop:nth-child(2),.dot .rain .drop:nth-child(8){
            margin-left: 9px;
        }
        .dot .rain .drop:nth-child(5){
            margin-left: 4px;
        }
    }


        </style>
        <div class='dot' style='width:{{size}}px; height:{{size}}px;'>
            <template if="{{data.pressure}}">
            <span class='night' style="left:{{data.nightLeft}}px; right:{{data.nightRight}}px;"></span>
            <span class='sun' style="left:{{data.sunLeft}}px; right:{{data.sunRight}}px; background:{{data.sunTone}}"></span>
            <span class='clouds' style="bottom:{{size-data.cloudCover*size}}px;"></span>
            <template if="{{!data.minTemp && !data.maxTemp}}">
                <span class='rain' style='opacity: {{data.rainMass}};'>
                    <template repeat="{{d in [1,2,3,4,5]}}">
                        <img src='drop.png' class='drop'>
                    </template>
                </span>
            </template>
            <template if="{{data.maxTemp}}">
                <span class='temp'>{{data.tempFeel}}&deg;</span>
            </template>
            </template>
        </div>
    </template>
    <script>
        Polymer({
            size: 40,
            data: {cloudCover:0,light:1,tempFeel:10}, // Default value

            dataChanged:function(alt,neu){
//                console.log('change',alt,neu,this.data);
//                console.log('change',this.data.tempFeel);
//                var hour = this.data.hour;
                this.data.sunTone   = 'hsl('+ (45-this.data.tempFeel/2) +',100%,'+ (85-this.data.tempFeel) +'%)';
                this.data.sunLeft   = this.data.hour>12 ? 0 : Math.round((1-this.data.light)*this.size);
                this.data.sunRight  = this.data.hour<12 ? 0 : Math.round((1-this.data.light)*this.size);
                this.data.nightLeft = this.data.hour<12 ? 0 : Math.round((this.data.light)*this.size);
                this.data.nightRight= this.data.hour>12 ? 0 : Math.round((this.data.light)*this.size);
            }
        });
    </script>
</polymer-element>

