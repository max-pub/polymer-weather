

<polymer-element name="sky-dot" attributes="data,size">
    <template>
        <style>
            .dot{
                position: relative;
                border-radius: 1000px;
                width: {{size}}px;
                height: {{size}}px;
                overflow:hidden;
                display:inline-block;
            }
            .dot .night{
                position:absolute;
                top:0; right:0;
                bottom: 0; left: 0;
                background: black;
            }
            .dot .sun{
                position:absolute;
                top:0; right:0;
                bottom: 0; left: 0;
                background: #ffb300;
            }
            .dot .clouds{
                position:absolute;
                top:0; left:0; right:0;
                background: #e0e0e0;
                opacity: 0.9;
            }


        </style>
        
        <div class='dot'>
            <span class='night' style="left:{{data.nightLeft}}px; right:{{data.nightRight}}px;"></span>
            <span class='sun' style="left:{{data.sunLeft}}px; right:{{data.sunRight}}px; background:{{data.sunTone}}"></span>
            <span class='clouds' style="bottom:{{size-data.cloudCover*size}}px;"></span>
        </div>      
    </template>
    <script>
        Polymer({
            size: 40,
            data: {cloudCover:0,light:1,tempFeel:10}, // Default value
            dataChanged:function(alt,neu){
                console.log('change',alt,neu,this.data);
                var hour = 14;
                this.data.sunTone   = 'hsl('+ (45-this.data.tempFeel/2) +',100%,'+ (85-this.data.tempFeel) +'%)';
                this.data.sunLeft   = hour>12 ? 0 : Math.round((1-this.data.light)*this.size);
                this.data.sunRight  = hour<12 ? 0 : Math.round((1-this.data.light)*this.size);
                this.data.nightLeft = hour<12 ? 0 : Math.round((this.data.light)*this.size);
                this.data.nightRight= hour>12 ? 0 : Math.round((this.data.light)*this.size);
            }
        });
    </script>
</polymer-element>
    
